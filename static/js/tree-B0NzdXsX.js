var _t=Object.defineProperty,Nt=Object.defineProperties;var jt=Object.getOwnPropertyDescriptors;var et=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var tt=(H,N,S)=>N in H?_t(H,N,{enumerable:!0,configurable:!0,writable:!0,value:S}):H[N]=S,J=(H,N)=>{for(var S in N||(N={}))Et.call(N,S)&&tt(H,S,N[S]);if(et)for(var S of et(N))Rt.call(N,S)&&tt(H,S,N[S]);return H},ae=(H,N)=>Nt(H,jt(N));import{g8 as Vt,g9 as Ht,c as At,V as Ft,d as Dt,a as Ve,ar as Lt,n as zt,e as re,A as Tt,B as nt,f as $t,k as Kt,g as Zt,i as Q,w as se,a2 as Ut,u as Se,v as Yt,s as Gt,h as ot,t as Xt,N as lt,cK as qt,L as Jt,_ as Qt}from"./index-CRNrcdxt.js";import{useDict as en}from"./hook-D-nmOYVA.js";import{R as tn}from"./index-xspeYZQe.js";import{u as He}from"./hooks-CQyVJYKx.js";import{d as nn}from"./delete-Ce0TSdK5.js";import{d as on}from"./edit-pen-Ci7W0xNM.js";import{A as ln}from"./add-circle-line-Cw_F_RXn.js";import"./dict.vue_vue_type_script_setup_true_lang-Bk1RzLvM.js";import"./index-DsnrFn8B.js";import"./rule-B0fK2Ol2.js";import"./index-f2bbcgR1.js";import"./hooks-CfZCSIix.js";import"./system-Bz4_Zwle.js";var Ae={exports:{}};const an=Vt(Ht);(function(H,N){(function(S,e){e(N,an)})(At,function(S,e){let j=null;function T(){return j!==null}function Be(t){j&&ce(),j=t}function pe(t){t===j&&(j=null)}function ce(){j&&(j.closeMenu(),j=null)}const V={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function Z(t,n){let r=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(r-=t.offsetParent.scrollTop,r+=Z(t.offsetParent,n)),r}function U(t,n){let r=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(r-=t.offsetParent.scrollLeft,r+=U(t.offsetParent,n)),r}function we(t,n,r,u){return{x:U(t,u)+n,y:Z(t,u)+r}}const O="mx-menu-default-container",I="mx-menu-container-";let G=0;function ee(t){const{getContainer:n,zIndex:r}=t;if(n){const d=typeof n=="function"?n():n;if(d){let m=d.getAttribute("id");return m||(m=I+G++,d.setAttribute("id",m)),{eleId:m,container:d,isNew:!1}}}let u=document.getElementById(O);return u||(u=document.createElement("div"),u.setAttribute("id",O),u.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(u)),u.style.zIndex=(r==null?void 0:r.toString())||V.defaultZindex.toString(),{eleId:O,container:u,isNew:!0}}function ie(t){return typeof t=="number"?`${t}px`:t}const D=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:r}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(r.value):n.value}}),te=(t,n)=>{const r=t.__vccOpts||t;for(const[u,d]of n)r[u]=d;return r},Ie={},We={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Pe=[e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1)];function $(t,n){return e.openBlock(),e.createElementBlock("svg",We,Pe)}const de=te(Ie,[["render",$]]),he={},ge={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ce=[e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1)];function Oe(t,n){return e.openBlock(),e.createElementBlock("svg",ge,Ce)}const Fe=te(he,[["render",Oe]]),at={class:"mx-item-row"},rt=["xlink:href"],it={key:1,class:"label"},ut={class:"mx-item-row"},st={class:"mx-shortcut"},ke=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:r}){const u=t,d=r,{clickHandler:m,clickClose:x,clickableWhenHasChildren:i,disabled:v,hidden:g,label:b,icon:o,iconFontClass:A,showRightArrow:B,shortcut:P,hasChildren:F}=e.toRefs(u),k=e.ref(!1),l=e.ref(!1),s=e.ref(),C=e.inject("globalOptions"),p=e.inject("globalHasSlot"),y=e.inject("globalRenderSlot"),c=e.inject("globalCloseMenu"),h=e.inject("menuContext"),W={getSubMenuInstance:()=>{},showSubMenu:()=>k.value?(h.markActiveMenuItem(W,!0),!0):F.value?(K(),!0):!1,hideSubMenu:()=>{h.closeOtherSubMenu()},isDisabledOrHidden:()=>v.value||g.value,getElement:()=>s.value,focus:()=>l.value=!0,blur:()=>l.value=!1,click:L};e.provide("menuItemInstance",W),e.onMounted(()=>{h.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let f=0;const _=h.getElement();if(_){let Y=0;for(let X=0;X<_.children.length;X++){const oe=_.children[X];if(oe.getAttribute("data-type")==="ContextMenuItem"){if(oe===s.value){f=Y;break}Y++}}}h.addChildMenuItem(W,f)}):h.addChildMenuItem(W)}),e.onBeforeUnmount(()=>{h.removeChildMenuItem(W)});function L(f){if(!v.value){if(f){const _=f.target;if(_.classList.contains("mx-context-no-clickable")||C.value.ignoreClickClassName&&_.classList.contains(C.value.ignoreClickClassName))return;if(C.value.clickCloseClassName&&_.classList.contains(C.value.clickCloseClassName)){f.stopPropagation(),c(u.rawMenuItem);return}}F.value?i.value?(typeof m.value=="function"&&m.value(f),d("click",f)):k.value||K():(typeof m.value=="function"&&m.value(f),d("click",f),x.value&&c(u.rawMenuItem))}}function K(f){l.value=!1,h.checkCloseOtherSubMenuTimeOut()||h.closeOtherSubMenu(),v.value||(h.markActiveMenuItem(W),F.value&&(f||h.markThisOpenedByKeyBoard(),h.addOpenedSubMenu(ne),k.value=!0,e.nextTick(()=>d("subMenuOpen",W))))}function ne(){l.value=!1,k.value=!1,d("subMenuClose",W)}function E(){return{disabled:v.value,label:b.value,icon:o.value,iconFontClass:A.value,showRightArrow:B.value,clickClose:x.value,clickableWhenHasChildren:i.value,shortcut:P.value,theme:C.value.theme,isOpen:k,hasChildren:F,onClick:L,onMouseEnter:K,closeMenu:c}}return n(W),(f,_)=>e.unref(g)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:s,"data-type":"ContextMenuItem"},[e.unref(p)("itemRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemRender",E())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(D),{key:1,vnode:t.customRender,data:E()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(v)?"disabled":"",l.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",k.value?"open":""]),onClick:L,onMouseenter:K},[e.renderSlot(f.$slots,"default",{},()=>[e.createElementVNode("div",at,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(f.$slots,"icon",{},()=>[e.unref(p)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemIconRender",E())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,rt)],16)):typeof e.unref(o)!="string"?(e.openBlock(),e.createBlock(e.unref(D),{key:2,vnode:e.unref(o),data:e.unref(o)},null,8,["vnode","data"])):typeof e.unref(o)=="string"&&e.unref(o)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(o)+" icon "+e.unref(A)+" "+e.unref(C).iconFontClass)},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(f.$slots,"check",{key:0},()=>[e.unref(p)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemCheckRender",E())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(de)]):e.createCommentVNode("",!0)],2),e.renderSlot(f.$slots,"label",{},()=>[e.unref(p)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemLabelRender",E())},null,8,["vnode"])):typeof e.unref(b)=="string"?(e.openBlock(),e.createElementBlock("span",it,e.toDisplayString(e.unref(b)),1)):(e.openBlock(),e.createBlock(e.unref(D),{key:2,vnode:e.unref(b),data:e.unref(b)},null,8,["vnode","data"]))])]),e.createElementVNode("div",ut,[e.unref(P)?e.renderSlot(f.$slots,"shortcut",{key:0},()=>[e.unref(p)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemShortcutRender",E())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",st,e.toDisplayString(e.unref(P)),1)]):e.createCommentVNode("",!0),e.unref(B)?e.renderSlot(f.$slots,"rightArrow",{key:1},()=>[e.unref(p)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(D),{key:0,vnode:()=>e.unref(y)("itemRightArrowRender",E())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(Fe)]):e.createCommentVNode("",!0)])])],34)),e.unref(C).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(C).menuTransitionProps)),{default:e.withCtx(()=>[k.value?e.renderSlot(f.$slots,"submenu",{key:0}):e.createCommentVNode("",!0)]),_:3},16)):k.value?e.renderSlot(f.$slots,"submenu",{key:4}):e.createCommentVNode("",!0)],512))}}),ct=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:D},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),dt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function mt(t,n,r,u,d,m){const x=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(x,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",dt))}const xe=te(ct,[["render",mt]]),ft=e.defineComponent({name:"ContextSubMenu",components:{ContextMenuItem:ke,ContextMenuSeparator:xe,ContextMenuIconRight:Fe},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const n=e.inject("menuContext"),r=e.inject("globalOptions"),u=e.inject("globalHasSlot"),d=e.inject("globalRenderSlot"),{zIndex:m,getParentWidth:x,getParentHeight:i,getZoom:v}=n,{adjustPosition:g}=e.toRefs(t),b=e.ref(),o=e.ref(),A=e.ref(),B=e.ref(),P=[],F=e.inject("globalSetCurrentSubMenu"),k=[];let l=null,s=0;function C(){l&&l.blur()}function p(a,w){if(a){for(let z=w!==void 0?w:0;z<k.length;z++)if(!k[z].isDisabledOrHidden()){y(z);break}}else for(let z=w!==void 0?w:k.length-1;z>=0;z--)if(!k[z].isDisabledOrHidden()){y(z);break}}function y(a){if(l&&C(),a!==void 0&&(l=k[Math.max(0,Math.min(a,k.length-1))]),!!l&&(l.focus(),le.value)){const w=l.getElement();w&&(f.value=Math.min(Math.max(-_.value,-w.offsetTop-w.offsetHeight+q.value),0))}}function c(){F(h)}const h={isTopLevel:()=>n.getParentContext()===null,closeSelfAndActiveParent:()=>{const a=K.getParentContext();if(a){a.closeOtherSubMenu();const w=a.getSubMenuInstanceContext();if(w)return w.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var a;return(a=K.getParentContext())==null?void 0:a.closeOtherSubMenu()},moveCurrentItemFirst:()=>p(!0),moveCurrentItemLast:()=>p(!1),moveCurrentItemDown:()=>p(!0,l?k.indexOf(l)+1:0),moveCurrentItemUp:()=>p(!1,l?k.indexOf(l)-1:0),focusCurrentItem:()=>y(),openCurrentItemSubMenu:()=>l?l==null?void 0:l.showSubMenu():!1,triggerCurrentItemClick:a=>l==null?void 0:l.click(a)};let W=!1,L=!1;const K={zIndex:m+1,container:n.container,adjustPadding:r.value.adjustPadding||V.defaultAdjustPadding,getParentWidth:()=>{var a;return((a=o.value)==null?void 0:a.offsetWidth)||0},getParentHeight:()=>{var a;return((a=o.value)==null?void 0:a.offsetHeight)||0},getParentX:()=>M.value.x,getParentY:()=>M.value.y,getParentAbsX:()=>o.value?U(o.value,n.container):0,getParentAbsY:()=>o.value?Z(o.value,n.container):0,getPositon:()=>[0,0],getZoom:()=>r.value.zoom||V.defaultZoom,addOpenedSubMenu(a){P.push(a)},closeOtherSubMenu(){P.forEach(a=>a()),P.splice(0,P.length),F(h)},checkCloseOtherSubMenuTimeOut(){return s?(clearTimeout(s),s=0,!0):!1},closeOtherSubMenuWithTimeOut(){s=setTimeout(()=>{s=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(a,w)=>{w===void 0?k.push(a):k.splice(w,0,a)},removeChildMenuItem:a=>{k.splice(k.indexOf(a),1),a.getSubMenuInstance=()=>{}},markActiveMenuItem:(a,w=!1)=>{C(),l=a,w&&y()},markThisOpenedByKeyBoard:()=>{W=!0},isOpenedByKeyBoardFlag:()=>W?(W=!1,!0):!1,isMenuItemDataCollectedFlag:()=>L,getElement:()=>o.value||null,getParentContext:()=>n,getSubMenuInstanceContext:()=>h};e.provide("menuContext",K);const ne={getChildItem:a=>k[a],getMenuDimensions:()=>b.value?{width:b.value.offsetWidth,height:b.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>b.value,getMenu:()=>o.value,getScrollValue:()=>f.value,setScrollValue:a=>f.value=a,getScrollHeight:()=>_.value,getMaxHeight:()=>q.value,getPosition:()=>M.value,setPosition:(a,w)=>{M.value.x=a,M.value.y=w}},E=e.inject("menuItemInstance",void 0);E&&(E.getSubMenuInstance=()=>ne);const f=e.ref(0),_=e.ref(0);function Y(a){a?f.value=Math.min(Math.max(f.value-50,-_.value),0):f.value=Math.min(f.value+50,0)}function X(a){a.preventDefault(),a.stopPropagation(),Y(a.deltaY>0)}function oe(a){r.value.mouseScroll&&(a.preventDefault(),a.stopPropagation(),Y(a.deltaY>0))}const le=e.ref(!1),M=e.ref({x:0,y:0}),q=e.ref(0);return e.onMounted(()=>{var w,z,$e,Ke;const a=n.getPositon();M.value={x:((z=(w=a[0])!=null?w:r.value.xOffset)!=null?z:0)/v(),y:((Ke=($e=a[1])!=null?$e:r.value.yOffset)!=null?Ke:0)/v()},F(h),e.nextTick(()=>{var Ye,Ge,Xe,qe;var Ze,Ue;const R=o.value;if(R&&A.value){const{container:ue}=n,Ne=(Ye=x==null?void 0:x())!=null?Ye:0,Je=(Ge=i==null?void 0:i())!=null?Ge:0,ye=typeof n.adjustPadding=="number"?n.adjustPadding:(Xe=(Ze=n.adjustPadding)==null?void 0:Ze.x)!=null?Xe:0,Me=typeof n.adjustPadding=="number"?n.adjustPadding:(qe=(Ue=n.adjustPadding)==null?void 0:Ue.y)!=null?qe:0,me=Je>0?Me:0,It=document.documentElement.scrollHeight/v(),Wt=document.documentElement.scrollWidth/v(),Pt=Math.min(Wt,ue.offsetWidth),je=Math.min(It,ue.offsetHeight);let Ee=U(R,ue),Re=Z(R,ue);t.direction.includes("l")?M.value.x-=R.offsetWidth+ye:t.direction.includes("r")?M.value.x+=Ne+ye:(M.value.x+=Ne/2,M.value.x-=(R.offsetWidth+ye)/2),t.direction.includes("t")?M.value.y-=(R.offsetHeight+Me*2)/v():t.direction.includes("b")?M.value.y-=Me/v():(M.value.y+=Je/2/v(),M.value.y-=(R.offsetHeight+Me)/2/v()),g.value&&e.nextTick(()=>{Ee=U(R,ue),Re=Z(R,ue);const Ot=Ee+R.offsetWidth-Pt,Qe=Re+R.offsetHeight+me*2-je;if(le.value=Qe>0,_.value=R.offsetHeight-je+me*2,Ot>0){const fe=Ne+R.offsetWidth-ye,ve=Ee;fe>ve?M.value.x-=ve:M.value.x-=fe}if(le.value){const fe=Qe,ve=Re;fe>ve?M.value.y-=ve-me:M.value.y-=fe-me,q.value=je-me*2}else q.value=0})}R==null||R.focus({preventScroll:!0}),n.isOpenedByKeyBoardFlag()&&p(!0),L=!0})}),e.onBeforeUnmount(()=>{E&&(E.getSubMenuInstance=()=>{})}),ae(J({submenuRoot:b,menu:o,scroll:A,options:r,zIndex:m,constOptions:V,scrollValue:f,upScrollButton:B,overflow:le,position:M,scrollHeight:_,maxHeight:q},ne),{globalHasSlot:u,globalRenderSlot:d,onScroll:Y,onSubMenuBodyClick:c,onMouseWhell:oe,onMouseWhellMx:X,solveNumberOrStringSize:ie})}}),vt={key:0,class:"mx-context-menu-updown placeholder"},pt={key:1,class:"mx-context-menu-updown placeholder"},ht={class:"mx-context-menu-scroll",ref:"scroll"};function gt(t,n,r,u,d,m){var b;const x=e.resolveComponent("ContextMenuSeparator"),i=e.resolveComponent("ContextSubMenu",!0),v=e.resolveComponent("ContextMenuItem"),g=e.resolveComponent("ContextMenuIconRight");return e.openBlock(),e.createElementBlock("div",{ref:"submenuRoot",class:e.normalizeClass(["mx-context-menu",t.options.customClass?t.options.customClass:"",(b=t.options.theme)!=null?b:""]),style:e.normalizeStyle({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:n[4]||(n[4]=(...o)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...o)),onWheel:n[5]||(n[5]=(...o)=>t.onMouseWhell&&t.onMouseWhell(...o))},[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref:"menu",style:e.normalizeStyle({top:`${t.scrollValue}px`})},[e.renderSlot(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",vt)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(o,A)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:A},[o.hidden!==!0&&o.divided==="up"?(e.openBlock(),e.createBlock(x,{key:0})):e.createCommentVNode("",!0),o.hidden!==!0&&o.divided==="self"?(e.openBlock(),e.createBlock(x,{key:1})):(e.openBlock(),e.createBlock(v,{key:2,clickHandler:o.onClick?B=>o.onClick(B):void 0,disabled:o.disabled,hidden:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:B=>{var P;return(P=o.onSubMenuOpen)==null?void 0:P.call(o,B)},onSubMenuClose:B=>{var P;return(P=o.onSubMenuClose)==null?void 0:P.call(o,B)}},e.createSlots({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:e.withCtx(()=>[e.createVNode(i,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:t.options.adjustPosition,direction:o.direction!==void 0?o.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(e.openBlock(),e.createBlock(x,{key:3})):e.createCommentVNode("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",pt)):e.createCommentVNode("",!0)])],4),e.createElementVNode("div",ht,[e.withDirectives(e.createElementVNode("div",{ref:"upScrollButton",class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:n[0]||(n[0]=o=>t.onScroll(!1)),onWheel:n[1]||(n[1]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(g)],34),[[e.vShow,t.overflow]]),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:n[2]||(n[2]=o=>t.onScroll(!0)),onWheel:n[3]||(n[3]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(g)],34),[[e.vShow,t.overflow]])],512)],38)}const be=te(ft,[["render",gt]]),Ct={class:"mx-menu-ghost-host"},De=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:r}){const u=t,d=r,m=e.useSlots(),x=e.ref(),{options:i,show:v,container:g}=e.toRefs(u);e.onMounted(()=>{v.value&&A()}),e.onBeforeUnmount(()=>{k()}),e.watch(v,c=>{c?A():(pe(b),k())});const b={closeMenu:B,isClosed:P,getMenuRef:()=>x.value,getMenuDimensions:()=>{var h;var c;return(h=(c=x.value)==null?void 0:c.getMenuDimensions())!=null?h:{width:0,height:0}}};let o=!1;function A(){F(),Be(b)}function B(c){o=!0,d("close",c),i.value.menuTransitionProps||d("closeAnimFinished"),pe(b)}function P(){return o}function F(){setTimeout(()=>{document.addEventListener("click",p,!0),document.addEventListener("contextmenu",p,!0),document.addEventListener("scroll",C,!0),!u.isFullScreenContainer&&g.value&&g.value.addEventListener("scroll",C,!0),i.value.keyboardControl!==!1&&document.addEventListener("keydown",s)},50)}function k(){document.removeEventListener("contextmenu",p,!0),document.removeEventListener("click",p,!0),document.removeEventListener("scroll",C,!0),!u.isFullScreenContainer&&g.value&&g.value.removeEventListener("scroll",C,!0),i.value.keyboardControl!==!1&&document.removeEventListener("keydown",s)}const l=e.ref();e.provide("globalSetCurrentSubMenu",c=>l.value=c);function s(c){var h,W,L,K,ne,E,f,_,Y,X,oe,le,M;let q=!0;switch(c.key){case"Escape":{((h=l.value)==null?void 0:h.isTopLevel())===!1?(W=l.value)==null||W.closeCurrentSubMenu():B();break}case"ArrowDown":(L=l.value)==null||L.moveCurrentItemDown();break;case"ArrowUp":(K=l.value)==null||K.moveCurrentItemUp();break;case"Home":(ne=l.value)==null||ne.moveCurrentItemFirst();break;case"End":(E=l.value)==null||E.moveCurrentItemLast();break;case"ArrowLeft":{(f=l.value)!=null&&f.closeSelfAndActiveParent()||(Y=(_=i.value).onKeyFocusMoveLeft)==null||Y.call(_);break}case"ArrowRight":(X=l.value)!=null&&X.openCurrentItemSubMenu()||(le=(oe=i.value).onKeyFocusMoveRight)==null||le.call(oe);break;case"Enter":(M=l.value)==null||M.triggerCurrentItemClick(c);break;default:q=!1;break}q&&l.value&&(c.stopPropagation(),c.preventDefault())}function C(){i.value.closeWhenScroll!==!1&&B()}function p(c){y(c.target,c)}function y(c,h){for(var W,L;c;){if(c.classList&&c.classList.contains("mx-menu-host"))return;c=c.parentNode}i.value.clickCloseOnOutside!==!1?(k(),B()):(L=(W=i.value).onClickOnOutside)==null||L.call(W,h)}return e.provide("globalOptions",i),e.provide("globalCloseMenu",B),e.provide("globalIsFullScreenContainer",u.isFullScreenContainer),e.provide("globalHasSlot",c=>m[c]!==void 0),e.provide("globalRenderSlot",(c,h)=>e.renderSlot(m,c,J({},h),()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:i.value.zIndex||V.defaultZindex,container:g.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>i.value.x,getParentAbsX:()=>i.value.y,getZoom:()=>i.value.zoom||V.defaultZoom,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[i.value.x,i.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(b),(c,h)=>(e.openBlock(),e.createElementBlock("div",Ct,[e.unref(i).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(i).menuTransitionProps,{onAfterLeave:h[0]||(h[0]=W=>d("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(v)?(e.openBlock(),e.createBlock(be,{key:0,ref_key:"submenuInstance",ref:x,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(V).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(V).defaultMinWidth,direction:e.unref(i).direction||e.unref(V).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(v)?(e.openBlock(),e.createBlock(be,{key:1,ref_key:"submenuInstance",ref:x,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(V).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(V).defaultMinWidth,direction:e.unref(i).direction||e.unref(V).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]))}}),Le=e.defineComponent({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,n){const{options:r,show:u}=e.toRefs(t),d=e.ref(null);return n.expose({closeMenu:()=>n.emit("update:show",!1),isClosed:()=>!u.value,getMenuRef:()=>{var m;return(m=d.value)==null?void 0:m.getMenuRef()},getMenuDimensions:()=>{var x;var m;return(x=(m=d.value)==null?void 0:m.getMenuDimensions())!=null?x:{width:0,height:0}}}),()=>{const{isNew:m,container:x,eleId:i}=ee(r.value);return[e.h(e.Teleport,{to:`#${i}`},[e.h(De,{ref:d,options:r,show:u,container:x,isFullScreenContainer:!m,onClose:v=>{var g,b;n.emit("update:show",!1),n.emit("close"),(b=(g=r.value).onClose)==null||b.call(g,v)}},n.slots)])]}}}),ze=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const r=e.inject("globalOptions"),{adjustSubMenuPosition:u,maxWidth:d,minWidth:m}=e.toRefs(t),x=typeof u.value<"u"?u.value:r.value.adjustPosition,i=e.ref(),v=e.ref();return n.expose({getSubMenuRef:()=>i.value,getMenuItemRef:()=>v.value}),()=>e.h(ke,ae(J({},t),{ref:v,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0}),n.slots.default?{submenu:()=>e.h(be,{ref:i,maxWidth:d.value,minWidth:m.value,adjustPosition:x},{default:n.slots.default})}:void 0)}});function kt(t,n,r,u){const d=e.ref(!0),m=e.h(De,{options:t,show:d,container:n,isFullScreenContainer:!r,onCloseAnimFinished:()=>{e.render(null,n)},onClose:x=>{var i;(i=t.onClose)==null||i.call(t,x),d.value=!1}},u);return e.render(m,n),m.component}function Te(t,n){const r=ee(t);return kt(t,r.container,r.isNew,n).exposed}const _e={install(t){t.config.globalProperties.$contextmenu=Te,t.component("ContextMenu",Le),t.component("ContextMenuItem",ke),t.component("ContextMenuGroup",ze),t.component("ContextMenuSperator",xe),t.component("ContextMenuSeparator",xe),t.component("ContextSubMenu",be)},showContextMenu(t,n){return Te(t,n)},isAnyContextMenuOpen(){return T()},closeContextMenu:ce,transformMenuPosition:we},xt={},bt={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},yt=[e.createElementVNode("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),e.createElementVNode("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),e.createElementVNode("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1)];function Mt(t,n){return e.openBlock(),e.createElementBlock("svg",bt,yt)}const St=te(xt,[["render",Mt]]),Bt=["onClick","onMouseenter"],wt=e.defineComponent({__name:"MenuBar",props:{options:{type:Object,default:null}},setup(t){const n=t,r=e.ref(),u=e.ref(!1),d=e.ref([]),m=e.ref(null);function x(){u.value=!0}function i(){u.value=!1}e.onMounted(()=>{d.value=n.options.items||[]}),e.watch(()=>n.options,()=>{d.value=n.options.items||[]});let v=null,g=-1;function b(){g<d.value.length-1?g++:g=0,B(g,d.value[g])}function o(){g>0?g--:g=d.value.length-1,B(g,d.value[g])}function A(l){var y;const s=(y=n.options.barPopDirection)!=null?y:"bl";let C=0,p=0;return s.startsWith("b")?p=Z(l)+l.offsetHeight:s.startsWith("t")?p=Z(l):p=Z(l)+l.offsetHeight/2,s.endsWith("l")?C=U(l):s.startsWith("r")?C=U(l)+l.offsetWidth:C=U(l)+l.offsetWidth/2,{x:C,y:p}}function B(l,s){var C;if(g=l,!s.children)return;v&&(v.closeMenu(),v=null,u.value=!0),m.value=s;const p=(C=r.value)==null?void 0:C.children[l];if(p){const{x:y,y:c}=A(p);v=_e.showContextMenu(ae(J({},n.options),{items:s.children,x:y,y:c,onKeyFocusMoveLeft(){o()},onKeyFocusMoveRight(){b()},onClose(){m.value==s&&(u.value=!1,m.value=null)}}))}}function P(){g=0;const l=r.value;if(l){const{x:s,y:C}=A(l);v=_e.showContextMenu(ae(J({},n.options),{x:s,y:C}))}}function F(l,s){s?(u.value=!0,B(l,s),s.onClick&&(s.clickableWhenHasChildren===!0&&s.children&&s.children.length>0||!s.children||s.children.length===0)&&s.onClick()):P()}function k(l,s){u.value&&B(l,s)}return(l,s)=>{var C;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-menu-bar",(C=t.options.theme)!=null?C:"",t.options.mini?"mini":""]),onFocus:x,onBlur:i},[e.renderSlot(l.$slots,"prefix"),t.options.mini?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"menuBarContent",ref:r,class:"mx-menu-bar-content"},[e.createElementVNode("div",{class:"mx-menu-bar-item",onClick:s[0]||(s[0]=p=>F(0,null))},[e.createVNode(St)])],512)):(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"menuBarContent",ref:r,class:"mx-menu-bar-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(p,y)=>(e.openBlock(),e.createElementBlock("div",{key:y,class:e.normalizeClass(["mx-menu-bar-item",p==m.value?"active":""]),onClick:c=>F(y,p),onMouseenter:c=>k(y,p)},e.toDisplayString(p.label),43,Bt))),128))],512)),e.renderSlot(l.$slots,"suffix")],34)}}});S.ContextMenu=Le,S.ContextMenuGroup=ze,S.ContextMenuItem=ke,S.ContextMenuSeparator=xe,S.MenuBar=wt,S.default=_e,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(Ae,Ae.exports);var rn=Ae.exports;const un=Ft(rn),sn={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},cn={class:"flex items-center h-[34px]"},dn=Dt({__name:"tree",props:{treeLoading:Boolean,treeData:Array},emits:["tree-select"],setup(H,{emit:N}){const S=N,e=Ve(),j=Ve(""),T=Ve({}),Be={children:"children",label:"name"},{isDark:pe}=Lt(),{openDictDialog:ce,getDictTreeData:V}=en(),Z=(O,I)=>O?`${I.name}（${I.code}）`.includes(O):!0;function U(O){var G,ee;const I=O.$treeNodeId;T.value[I]=(G=T.value[I])!=null&&G.highlight?Object.assign({id:I},T.value[I],{highlight:!1}):Object.assign({id:I},T.value[I],{highlight:!0}),Object.values(T.value).forEach(ie=>{ie.id!==I&&(ie.highlight=!1)}),S("tree-select",(ee=T.value[I])!=null&&ee.highlight?Object.assign(ae(J({},O),{selected:!0})):Object.assign(ae(J({},O),{selected:!1})))}function we(O,{name:I,data:G}){O.preventDefault(),un.showContextMenu({x:O.x,y:O.y,theme:pe.value?"dark":"default",items:[{label:"修改",icon:lt(He(on)),onClick:()=>{ce("修改",G)}},{label:"删除",icon:lt(He(nn)),onClick:()=>{qt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${I}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{V(),Jt("已成功删除",{type:"success"})})}}]})}return zt(j,O=>{e.value.filter(O)}),(O,I)=>{const G=re("IconifyIconOffline"),ee=re("el-icon"),ie=re("el-input"),D=re("el-divider"),te=re("el-tree"),Ie=re("el-scrollbar"),We=re("el-button"),Pe=Tt("loading");return nt(($t(),Kt("div",sn,[Zt("div",cn,[Q(ie,{modelValue:j.value,"onUpdate:modelValue":I[0]||(I[0]=$=>j.value=$),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:se(()=>[Q(ee,{class:"el-input__icon"},{default:se(()=>[nt(Q(G,{icon:"ri:search-line"},null,512),[[Ut,j.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),Q(D),Q(Ie,{height:"calc(90vh - 150px)"},{default:se(()=>[Q(te,{ref_key:"treeRef",ref:e,data:H.treeData,"node-key":"id",size:"small",props:Be,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":Z,onNodeClick:U},{default:se(({node:$,data:de})=>{var he,ge,Ce;return[Q(Se(tn),{class:Yt(["!w-full","!p-1","!mt-2","!mr-2","rounded","select-none","hover:text-primary",j.value.trim().length>0&&`${$.label}（${de.code}）`.includes(j.value)&&"!text-red-500",(he=T.value[$.id])!=null&&he.highlight?"dark:!text-primary":""]),style:Gt({color:(ge=T.value[$.id])!=null&&ge.highlight?"var(--el-color-primary)":"",background:(Ce=T.value[$.id])!=null&&Ce.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:Oe=>we(Oe,{name:$.label,data:de})},{default:se(()=>[ot(Xt(`${$.label}（${de.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),Q(We,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:Se(He)(Se(ln)),onClick:I[1]||(I[1]=$=>Se(ce)())},{default:se(()=>[ot(" 新增字典 ")]),_:1},8,["icon"])])),[[Pe,H.treeLoading]])}}}),wn=Qt(dn,[["__scopeId","data-v-1026a67b"]]);export{wn as default};
