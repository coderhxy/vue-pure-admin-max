var B=(T,b,r)=>new Promise((d,o)=>{var f=l=>{try{p(r.next(l))}catch(m){o(m)}},n=l=>{try{p(r.throw(l))}catch(m){o(m)}},p=l=>l.done?d(l.value):Promise.resolve(l.value).then(f,n);p((r=r.apply(T,b)).next())});import{f as $,g as A,b as M,c as W,_ as G}from"./_plugin-vue_export-helper-JVNV45cE.js";/* empty css                   */import{u as H,P as J}from"./plus-form-u7be6nd-.js";import{d as D,a as v,p as K,db as Q,n as E,e as U,f as x,b as X,aq as I,w as a,U as c,g as Y,ar as V,b5 as _,i as g,h as F,t as z,u as i,a6 as L,l as C,bT as Z,cV as N,k as ee}from"./index-3Xb-rnGd.js";const le={class:"plus-drawer-form__footer"};var ae=D({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(T,{expose:b,emit:r}){const d=T,o=r,{t:f}=H(),n=v(null),p=K(()=>{var e;return(e=n.value)==null?void 0:e.formInstance}),l=v(),m=v({}),h=v(!1),k=Q(),R=$(k,A()),O=$(k,M()),j=$(k,W());E(()=>d.visible,e=>{h.value=e},{immediate:!0}),E(()=>d.modelValue,e=>{m.value=e},{immediate:!0});const q=(e,u)=>{o("update:modelValue",e),o("change",e,u)},S=()=>B(this,null,function*(){var e,u,w;try{(yield(e=p.value)==null?void 0:e.validate())&&o("confirm",m.value)}catch(t){if(d.hasErrorTip){N.closeAll();const s=Object.values(t);N.warning(((w=(u=s[0])==null?void 0:u[0])==null?void 0:w.message)||f("plus.form.errorTip"))}o("confirmError",t)}}),P=()=>{h.value=!1,o("update:visible",h.value),o("cancel")};return b({drawerInstance:l,formInstance:p}),(e,u)=>{const w=U("el-button");return x(),X(i(Z),L({ref_key:"drawerInstance",ref:l,modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=t=>h.value=t),class:"plus-drawer-form",size:e.size||"540px",title:i(f)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.drawer,{onClose:P}),I({default:a(()=>[g(i(J),L({ref_key:"formInstance",ref:n,modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=t=>m.value=t),"has-footer":!1},e.form,{onChange:q}),I({_:2},[e.$slots["form-footer"]?{name:"footer",fn:a(()=>[c(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:a(()=>[c(e.$slots,"form-group-header")]),key:"1"}:void 0,C(i(R),(t,s)=>({name:s,fn:a(y=>[c(e.$slots,s,V(_(y)))])})),C(i(O),(t,s)=>({name:s,fn:a(y=>[c(e.$slots,s,V(_(y)))])})),C(i(j),(t,s)=>({name:s,fn:a(y=>[c(e.$slots,s,V(_(y)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:a(()=>[c(e.$slots,"tooltip-icon")]),key:"2"}:void 0]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:a(()=>[c(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:a(()=>[Y("div",le,[c(e.$slots,"drawer-footer",V(_({handleConfirm:S,handleCancel:P})),()=>[g(w,{onClick:P},{default:a(()=>[F(z(e.cancelText||i(f)("plus.drawerForm.cancelText")),1)]),_:1}),g(w,{type:"primary",loading:e.confirmLoading,onClick:S},{default:a(()=>[F(z(e.confirmText||i(f)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"])}}}),oe=G(ae,[["__file","index.vue"]]);const re=oe,de=D({__name:"drawer",setup(T){const b=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],r=v(!1),d=v({}),o=()=>{r.value=!0};return(f,n)=>{const p=U("el-button");return x(),ee("div",null,[g(p,{onClick:o},{default:a(()=>[F("打开抽屉表单")]),_:1}),g(i(re),{visible:r.value,"onUpdate:visible":n[0]||(n[0]=l=>r.value=l),modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=l=>d.value=l),form:{columns:b}},null,8,["visible","modelValue","form"])])}}});export{de as _};
