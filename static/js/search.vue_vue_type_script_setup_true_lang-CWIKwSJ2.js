var J=Object.defineProperty,K=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var L=(t,l,a)=>l in t?J(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,T=(t,l)=>{for(var a in l||(l={}))O.call(l,a)&&L(t,a,l[a]);if(I)for(var a of I(l))Q.call(l,a)&&L(t,a,l[a]);return t},R=(t,l)=>K(t,M(l));var E=(t,l,a)=>new Promise((p,n)=>{var d=s=>{try{r(a.next(s))}catch(f){n(f)}},i=s=>{try{r(a.throw(s))}catch(f){n(f)}},r=s=>s.done?p(s.value):Promise.resolve(s.value).then(d,i);r((a=a.apply(t,l)).next())});import{f as k,g as W,b as X,c as Y,_ as ee}from"./_plugin-vue_export-helper-79NrF8y-.js";import{u as le,P as ae}from"./plus-form-51ayFmBL.js";import{d as q,a as _,db as oe,p as x,u as o,n as se,f as m,b as h,aq as te,l as C,w as u,U as b,ar as N,b5 as U,bZ as re,br as D,fs as ne,h as B,t as F,j as $,i as j,ft as ue,c3 as pe,b_ as de,fu as ce,fv as ie,a6 as fe}from"./index-BBFSeAfV.js";var me=q({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset","collapse"],setup(t,{expose:l,emit:a}){const p=t,n=a,{t:d}=le(),i=_(),r=_(!1),s=_({}),f=oe(),z=k(f,W()),Z=k(f,X()),A=k(f,Y()),S=x(()=>p.columns.filter(e=>o(e.hideInSearch)!==!0).map(e=>R(T({},e),{hideInForm:!1}))),G=x(()=>p.hasUnfold&&!r.value?S.value.slice(0,p.showNumber):S.value);se(()=>p.modelValue,e=>{s.value=e},{immediate:!0});const H=(e,g)=>E(this,null,function*(){n("update:modelValue",e),n("change",e,g)}),w=()=>{n("search",s.value)},P=()=>{s.value=T({},p.defaultValues),n("update:modelValue",s.value),n("reset",s.value)},V=()=>{r.value=!r.value,n("collapse",r.value)};return l({plusFormInstance:i,handleReset:P,handleSearch:w,handleUnfold:V}),(e,g)=>(m(),h(o(ae),fe({ref_key:"plusFormInstance",ref:i},e.$attrs,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=y=>s.value=y),inline:e.inline,"row-props":e.rowProps,"col-props":e.colProps,columns:G.value,class:"plus-search","has-footer":!1,onChange:H}),te({"search-footer":u(()=>[e.hasFooter?(m(),h(o(re),{key:0,class:"plus-search__button__wrapper"},{default:u(()=>[b(e.$slots,"footer",{isShowUnfold:r.value,handleReset:P,handleSearch:w,handleUnfold:V},()=>[e.hasReset?(m(),h(o(D),{key:0,icon:o(ne),onClick:P},{default:u(()=>[B(F(e.resetText||o(d)("plus.search.resetText")),1)]),_:1},8,["icon"])):$("v-if",!0),j(o(D),{type:"primary",loading:e.searchLoading,icon:o(ue),onClick:w},{default:u(()=>[B(F(e.searchText||o(d)("plus.search.searchText")),1)]),_:1},8,["loading","icon"]),e.hasUnfold&&S.value.length>e.showNumber?(m(),h(o(pe),{key:1,class:"plus-search__unfold",type:"primary",underline:!1,onClick:V},{default:u(()=>[B(F(r.value?o(d)("plus.search.retract"):o(d)("plus.search.expand"))+" ",1),j(o(de),null,{default:u(()=>[r.value?(m(),h(o(ce),{key:0})):(m(),h(o(ie),{key:1}))]),_:1})]),_:1})):$("v-if",!0)])]),_:3})):$("v-if",!0)]),_:2},[C(o(z),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),C(o(Z),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),C(o(A),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:u(()=>[b(e.$slots,"tooltip-icon")]),key:"0"}:void 0]),1040,["modelValue","inline","row-props","col-props","columns"]))}}),he=ee(me,[["__file","index.vue"]]);const ve=he,Se=q({__name:"search",setup(t){const l=_({status:"0",time:new Date().toString()}),a=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],p=i=>{},n=i=>{},d=()=>{};return(i,r)=>(m(),h(o(ve),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=s=>l.value=s),columns:a,"show-number":2,"label-width":"80","label-position":"right",onChange:p,onSearch:n,onReset:d},null,8,["modelValue"]))}});export{Se as _};
