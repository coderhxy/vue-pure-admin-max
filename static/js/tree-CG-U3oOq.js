var st=Object.defineProperty,rt=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Ze=(e,t,l)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ue=(e,t)=>{for(var l in t||(t={}))ct.call(t,l)&&Ze(e,l,t[l]);if(Ke)for(var l of Ke(t))mt.call(t,l)&&Ze(e,l,t[l]);return e},me=(e,t)=>rt(e,dt(t));import{d as oe,b3 as se,a as I,ba as D,b6 as q,m as Be,y as ge,z as je,u as o,j as H,f,k as $,b as B,v as ee,Q as z,g as Z,a3 as We,i as T,t as Pe,w as U,as as vt,ej as Je,L as ne,T as ft,aY as ht,n as Qe,gq as Ue,e as K,F as Xe,l as pt,ar as gt,s as Oe,B as be,a0 as Re,at as bt,A as xt,h as Ye,fQ as yt,J as Ct,_ as Mt}from"./index-DUhDYU9H.js";import{useDict as kt}from"./hook-DxAccZre.js";import{R as St}from"./index-DYJXLXnF.js";import{u as Ie}from"./hooks-DkR5UUBZ.js";import{d as It}from"./delete-Ce0TSdK5.js";import{d as wt}from"./edit-pen-Ci7W0xNM.js";import{d as Wt}from"./add-circle-line-DOJqVT3s.js";import"./dict.vue_vue_type_script_setup_true_lang-DEHnwje2.js";import"./index-CgOG5-I6.js";import"./rule-BLsg5v1x.js";import"./index-q77FZ1QF.js";import"./hooks-B9B7bP86.js";import"./system-BEm4o0Sb.js";let te=null;function Pt(){return te!==null}function Ot(e){te&&et(),te=e}function Ge(e){e===te&&(te=null)}function et(){te&&(te.closeMenu(),te=null)}const V={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function ve(e,t){let l=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=t&&(l-=e.offsetParent.scrollTop,l+=ve(e.offsetParent,t)),l}function fe(e,t){let l=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=t&&(l-=e.offsetParent.scrollLeft,l+=fe(e.offsetParent,t)),l}function Rt(e,t,l,c){return{x:fe(e,c)+t,y:ve(e,c)+l}}const we="mx-menu-default-container",_t="mx-menu-container-";let Bt=0;function tt(e){const{getContainer:t,zIndex:l}=e;if(t){const v=typeof t=="function"?t():t;if(v){let r=v.getAttribute("id");return r||(r=_t+Bt++,v.setAttribute("id",r)),{eleId:r,container:v,isNew:!1}}}let c=document.getElementById(we);return c||(c=document.createElement("div"),c.setAttribute("id",we),c.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(c)),c.style.zIndex=(l==null?void 0:l.toString())||V.defaultZindex.toString(),{eleId:we,container:c,isNew:!0}}function jt(e){return typeof e=="number"?`${e}px`:e}const Y=oe({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:t,data:l}=se(e);return()=>typeof t.value=="function"?t.value(l.value):t.value}}),ye=(e,t)=>{const l=e.__vccOpts||e;for(const[c,v]of t)l[c]=v;return l},Ht={},At={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Lt=Z("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Ft=[Lt];function $t(e,t){return f(),$("svg",At,Ft)}const Dt=ye(Ht,[["render",$t]]),Tt={},Et={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Nt=Z("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),zt=[Nt];function Vt(e,t){return f(),$("svg",Et,zt)}const nt=ye(Tt,[["render",Vt]]),Kt={class:"mx-item-row"},Zt=["xlink:href"],Ut={key:1,class:"label"},Xt={class:"mx-item-row"},Yt={class:"mx-shortcut"},He=oe({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:t,emit:l}){const c=e,v=l,{clickHandler:r,clickClose:g,clickableWhenHasChildren:u,disabled:p,hidden:P,label:b,icon:n,iconFontClass:E,showRightArrow:O,shortcut:R,hasChildren:x}=se(c),i=I(!1),s=I(!1),j=I(),k=D("globalOptions"),w=D("globalHasSlot"),A=D("globalRenderSlot"),d=D("globalCloseMenu"),h=D("menuContext"),y={getSubMenuInstance:()=>{},showSubMenu:()=>i.value?(h.markActiveMenuItem(y,!0),!0):x.value?(L(),!0):!1,hideSubMenu:()=>{h.closeOtherSubMenu()},isDisabledOrHidden:()=>p.value||P.value,getElement:()=>j.value,focus:()=>s.value=!0,blur:()=>s.value=!1,click:C};q("menuItemInstance",y),Be(()=>{h.isMenuItemDataCollectedFlag()?ge(()=>{let m=0;const W=h.getElement();if(W){let G=0;for(let J=0;J<W.children.length;J++){const le=W.children[J];if(le.getAttribute("data-type")==="ContextMenuItem"){if(le===j.value){m=G;break}G++}}}h.addChildMenuItem(y,m)}):h.addChildMenuItem(y)}),je(()=>{h.removeChildMenuItem(y)});function C(m){if(!p.value){if(m){const W=m.target;if(W.classList.contains("mx-context-no-clickable")||k.value.ignoreClickClassName&&W.classList.contains(k.value.ignoreClickClassName))return;if(k.value.clickCloseClassName&&W.classList.contains(k.value.clickCloseClassName)){m.stopPropagation(),d(c.rawMenuItem);return}}x.value?u.value?(typeof r.value=="function"&&r.value(m),v("click",m)):i.value||L():(typeof r.value=="function"&&r.value(m),v("click",m),g.value&&d(c.rawMenuItem))}}function L(m){s.value=!1,h.checkCloseOtherSubMenuTimeOut()||h.closeOtherSubMenu(),p.value||(h.markActiveMenuItem(y),x.value&&(m||h.markThisOpenedByKeyBoard(),h.addOpenedSubMenu(X),i.value=!0,ge(()=>v("subMenuOpen",y))))}function X(){s.value=!1,i.value=!1,v("subMenuClose",y)}function _(){return{disabled:p.value,label:b.value,icon:n.value,iconFontClass:E.value,showRightArrow:O.value,clickClose:g.value,clickableWhenHasChildren:u.value,shortcut:R.value,theme:k.value.theme,isOpen:i,hasChildren:x,onClick:C,onMouseEnter:L,closeMenu:d}}return t(y),(m,W)=>o(P)?H("",!0):(f(),$("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:j,"data-type":"ContextMenuItem"},[o(w)("itemRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemRender",_())},null,8,["vnode"])):e.customRender?(f(),B(o(Y),{key:1,vnode:e.customRender,data:_()},null,8,["vnode","data"])):(f(),$("div",{key:2,class:ee(["mx-context-menu-item",o(p)?"disabled":"",s.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",i.value?"open":""]),onClick:C,onMouseenter:L},[z(m.$slots,"default",{},()=>[Z("div",Kt,[Z("div",{class:ee(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[z(m.$slots,"icon",{},()=>[o(w)("itemIconRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemIconRender",_())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(f(),$("svg",We({key:1,class:"icon svg"},e.svgProps),[Z("use",{"xlink:href":e.svgIcon},null,8,Zt)],16)):typeof o(n)!="string"?(f(),B(o(Y),{key:2,vnode:o(n),data:o(n)},null,8,["vnode","data"])):typeof o(n)=="string"&&o(n)!==""?(f(),$("i",{key:3,class:ee(o(n)+" icon "+o(E)+" "+o(k).iconFontClass)},null,2)):H("",!0)]),e.checked?z(m.$slots,"check",{key:0},()=>[o(w)("itemCheckRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemCheckRender",_())},null,8,["vnode"])):H("",!0),T(Dt)]):H("",!0)],2),z(m.$slots,"label",{},()=>[o(w)("itemLabelRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemLabelRender",_())},null,8,["vnode"])):typeof o(b)=="string"?(f(),$("span",Ut,Pe(o(b)),1)):(f(),B(o(Y),{key:2,vnode:o(b),data:o(b)},null,8,["vnode","data"]))])]),Z("div",Xt,[o(R)?z(m.$slots,"shortcut",{key:0},()=>[o(w)("itemShortcutRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemShortcutRender",_())},null,8,["vnode"])):H("",!0),Z("span",Yt,Pe(o(R)),1)]):H("",!0),o(O)?z(m.$slots,"rightArrow",{key:1},()=>[o(w)("itemRightArrowRender")?(f(),B(o(Y),{key:0,vnode:()=>o(A)("itemRightArrowRender",_())},null,8,["vnode"])):H("",!0),T(nt)]):H("",!0)])])],34)),o(k).menuTransitionProps?(f(),B(Je,vt(We({key:3},o(k).menuTransitionProps)),{default:U(()=>[i.value?z(m.$slots,"submenu",{key:0}):H("",!0)]),_:3},16)):i.value?z(m.$slots,"submenu",{key:4}):H("",!0)],512))}}),Gt=oe({name:"ContextMenuSperator",components:{VNodeRender:Y},setup(){const e=D("globalHasSlot"),t=D("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:t}}}),qt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Jt(e,t,l,c,v,r){const g=K("VNodeRender");return e.globalHasSlot("separatorRender")?(f(),B(g,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(f(),$("div",qt))}const _e=ye(Gt,[["render",Jt]]),Qt=oe({name:"ContextSubMenu",components:{ContextMenuItem:He,ContextMenuSeparator:_e,ContextMenuIconRight:nt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(e){const t=D("menuContext"),l=D("globalOptions"),c=D("globalHasSlot"),v=D("globalRenderSlot"),{zIndex:r,getParentWidth:g,getParentHeight:u,getZoom:p}=t,{adjustPosition:P}=se(e),b=I(),n=I(),E=I(),O=I(),R=[],x=D("globalSetCurrentSubMenu"),i=[];let s=null,j=0;function k(){s&&s.blur()}function w(a,S){if(a){for(let N=S!==void 0?S:0;N<i.length;N++)if(!i[N].isDisabledOrHidden()){A(N);break}}else for(let N=S!==void 0?S:i.length-1;N>=0;N--)if(!i[N].isDisabledOrHidden()){A(N);break}}function A(a){if(s&&k(),a!==void 0&&(s=i[Math.max(0,Math.min(a,i.length-1))]),!!s&&(s.focus(),ae.value)){const S=s.getElement();S&&(m.value=Math.min(Math.max(-W.value,-S.offsetTop-S.offsetHeight+Q.value),0))}}function d(){x(h)}const h={isTopLevel:()=>t.getParentContext()===null,closeSelfAndActiveParent:()=>{const a=L.getParentContext();if(a){a.closeOtherSubMenu();const S=a.getSubMenuInstanceContext();if(S)return S.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var a;return(a=L.getParentContext())==null?void 0:a.closeOtherSubMenu()},moveCurrentItemFirst:()=>w(!0),moveCurrentItemLast:()=>w(!1),moveCurrentItemDown:()=>w(!0,s?i.indexOf(s)+1:0),moveCurrentItemUp:()=>w(!1,s?i.indexOf(s)-1:0),focusCurrentItem:()=>A(),openCurrentItemSubMenu:()=>s?s==null?void 0:s.showSubMenu():!1,triggerCurrentItemClick:a=>s==null?void 0:s.click(a)};let y=!1,C=!1;const L={zIndex:r+1,container:t.container,adjustPadding:l.value.adjustPadding||V.defaultAdjustPadding,getParentWidth:()=>{var a;return((a=n.value)==null?void 0:a.offsetWidth)||0},getParentHeight:()=>{var a;return((a=n.value)==null?void 0:a.offsetHeight)||0},getParentX:()=>M.value.x,getParentY:()=>M.value.y,getParentAbsX:()=>n.value?fe(n.value,t.container):0,getParentAbsY:()=>n.value?ve(n.value,t.container):0,getPositon:()=>[0,0],getZoom:()=>l.value.zoom||V.defaultZoom,addOpenedSubMenu(a){R.push(a)},closeOtherSubMenu(){R.forEach(a=>a()),R.splice(0,R.length),x(h)},checkCloseOtherSubMenuTimeOut(){return j?(clearTimeout(j),j=0,!0):!1},closeOtherSubMenuWithTimeOut(){j=setTimeout(()=>{j=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(a,S)=>{S===void 0?i.push(a):i.splice(S,0,a)},removeChildMenuItem:a=>{i.splice(i.indexOf(a),1),a.getSubMenuInstance=()=>{}},markActiveMenuItem:(a,S=!1)=>{k(),s=a,S&&A()},markThisOpenedByKeyBoard:()=>{y=!0},isOpenedByKeyBoardFlag:()=>y?(y=!1,!0):!1,isMenuItemDataCollectedFlag:()=>C,getElement:()=>n.value||null,getParentContext:()=>t,getSubMenuInstanceContext:()=>h};q("menuContext",L);const X={getChildItem:a=>i[a],getMenuDimensions:()=>b.value?{width:b.value.offsetWidth,height:b.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>b.value,getMenu:()=>n.value,getScrollValue:()=>m.value,setScrollValue:a=>m.value=a,getScrollHeight:()=>W.value,getMaxHeight:()=>Q.value,getPosition:()=>M.value,setPosition:(a,S)=>{M.value.x=a,M.value.y=S}},_=D("menuItemInstance",void 0);_&&(_.getSubMenuInstance=()=>X);const m=I(0),W=I(0);function G(a){a?m.value=Math.min(Math.max(m.value-50,-W.value),0):m.value=Math.min(m.value+50,0)}function J(a){a.preventDefault(),a.stopPropagation(),G(a.deltaY>0)}function le(a){l.value.mouseScroll&&(a.preventDefault(),a.stopPropagation(),G(a.deltaY>0))}const ae=I(!1),M=I({x:0,y:0}),Q=I(0);return Be(()=>{var S,N,Ae,Le;const a=t.getPositon();M.value={x:((N=(S=a[0])!=null?S:l.value.xOffset)!=null?N:0)/p(),y:((Le=(Ae=a[1])!=null?Ae:l.value.yOffset)!=null?Le:0)/p()},x(h),ge(()=>{var De,Te,Ee,Ne;var Fe,$e;const F=n.value;if(F&&E.value){const{container:ie}=t,Ce=(De=g==null?void 0:g())!=null?De:0,ze=(Te=u==null?void 0:u())!=null?Te:0,he=typeof t.adjustPadding=="number"?t.adjustPadding:(Ee=(Fe=t.adjustPadding)==null?void 0:Fe.x)!=null?Ee:0,pe=typeof t.adjustPadding=="number"?t.adjustPadding:(Ne=($e=t.adjustPadding)==null?void 0:$e.y)!=null?Ne:0,re=ze>0?pe:0,lt=document.documentElement.scrollHeight/p(),at=document.documentElement.scrollWidth/p(),it=Math.min(at,ie.offsetWidth),Me=Math.min(lt,ie.offsetHeight);let ke=fe(F,ie),Se=ve(F,ie);e.direction.includes("l")?M.value.x-=F.offsetWidth+he:e.direction.includes("r")?M.value.x+=Ce+he:(M.value.x+=Ce/2,M.value.x-=(F.offsetWidth+he)/2),e.direction.includes("t")?M.value.y-=(F.offsetHeight+pe*2)/p():e.direction.includes("b")?M.value.y-=pe/p():(M.value.y+=ze/2/p(),M.value.y-=(F.offsetHeight+pe)/2/p()),P.value&&ge(()=>{ke=fe(F,ie),Se=ve(F,ie);const ut=ke+F.offsetWidth-it,Ve=Se+F.offsetHeight+re*2-Me;if(ae.value=Ve>0,W.value=F.offsetHeight-Me+re*2,ut>0){const de=Ce+F.offsetWidth-he,ce=ke;de>ce?M.value.x-=ce:M.value.x-=de}if(ae.value){const de=Ve,ce=Se;de>ce?M.value.y-=ce-re:M.value.y-=de-re,Q.value=Me-re*2}else Q.value=0})}F==null||F.focus({preventScroll:!0}),t.isOpenedByKeyBoardFlag()&&w(!0),C=!0})}),je(()=>{_&&(_.getSubMenuInstance=()=>{})}),me(ue({submenuRoot:b,menu:n,scroll:E,options:l,zIndex:r,constOptions:V,scrollValue:m,upScrollButton:O,overflow:ae,position:M,scrollHeight:W,maxHeight:Q},X),{globalHasSlot:c,globalRenderSlot:v,onScroll:G,onSubMenuBodyClick:d,onMouseWhell:le,onMouseWhellMx:J,solveNumberOrStringSize:jt})}}),en={key:0,class:"mx-context-menu-updown placeholder"},tn={key:1,class:"mx-context-menu-updown placeholder"},nn={class:"mx-context-menu-scroll",ref:"scroll"};function on(e,t,l,c,v,r){var b;const g=K("ContextMenuSeparator"),u=K("ContextSubMenu",!0),p=K("ContextMenuItem"),P=K("ContextMenuIconRight");return f(),$("div",{ref:"submenuRoot",class:ee(["mx-context-menu",e.options.customClass?e.options.customClass:"",(b=e.options.theme)!=null?b:""]),style:Oe({maxWidth:e.maxWidth?e.solveNumberOrStringSize(e.maxWidth):`${e.constOptions.defaultMaxWidth}px`,minWidth:e.minWidth?e.solveNumberOrStringSize(e.minWidth):`${e.constOptions.defaultMinWidth}px`,maxHeight:e.overflow&&e.maxHeight>0?`${e.maxHeight}px`:void 0,zIndex:e.zIndex,left:`${e.position.x}px`,top:`${e.position.y}px`}),"data-type":"ContextSubMenu",onClick:t[4]||(t[4]=(...n)=>e.onSubMenuBodyClick&&e.onSubMenuBodyClick(...n)),onWheel:t[5]||(t[5]=(...n)=>e.onMouseWhell&&e.onMouseWhell(...n))},[Z("div",{class:ee(["mx-context-menu-items"]),ref:"menu",style:Oe({top:`${e.scrollValue}px`})},[z(e.$slots,"default",{},()=>[e.overflow&&e.options.updownButtonSpaceholder?(f(),$("div",en)):H("",!0),(f(!0),$(Xe,null,pt(e.items,(n,E)=>(f(),$(Xe,{key:E},[n.hidden!==!0&&n.divided==="up"?(f(),B(g,{key:0})):H("",!0),n.hidden!==!0&&n.divided==="self"?(f(),B(g,{key:1})):(f(),B(p,{key:2,clickHandler:n.onClick?O=>n.onClick(O):void 0,disabled:typeof n.disabled=="object"?n.disabled.value:n.disabled,hidden:typeof n.hidden=="object"?n.hidden.value:n.hidden,icon:n.icon,iconFontClass:n.iconFontClass,svgIcon:n.svgIcon,svgProps:n.svgProps,label:n.label,customRender:n.customRender,customClass:n.customClass,checked:typeof n.checked=="object"?n.checked.value:n.checked,shortcut:n.shortcut,clickClose:n.clickClose,clickableWhenHasChildren:n.clickableWhenHasChildren,preserveIconWidth:n.preserveIconWidth!==void 0?n.preserveIconWidth:e.options.preserveIconWidth,showRightArrow:n.children&&n.children.length>0,hasChildren:n.children&&n.children.length>0,rawMenuItem:n,onSubMenuOpen:O=>{var R;return(R=n.onSubMenuOpen)==null?void 0:R.call(n,O)},onSubMenuClose:O=>{var R;return(R=n.onSubMenuClose)==null?void 0:R.call(n,O)}},gt({_:2},[n.children&&n.children.length>0?{name:"submenu",fn:U(()=>[T(u,{items:n.children,maxWidth:n.maxWidth,minWidth:n.minWidth,adjustPosition:n.adjustSubMenuPosition!==void 0?n.adjustSubMenuPosition:e.options.adjustPosition,direction:n.direction!==void 0?n.direction:e.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),n.hidden!==!0&&(n.divided==="down"||n.divided===!0)?(f(),B(g,{key:3})):H("",!0)],64))),128)),e.overflow&&e.options.updownButtonSpaceholder?(f(),$("div",tn)):H("",!0)])],4),Z("div",nn,[be(Z("div",{ref:"upScrollButton",class:ee("mx-context-menu-updown mx-context-no-clickable up"+(e.overflow&&e.scrollValue<0?"":" disabled")),onClick:t[0]||(t[0]=n=>e.onScroll(!1)),onWheel:t[1]||(t[1]=(...n)=>e.onMouseWhellMx&&e.onMouseWhellMx(...n))},[T(P)],34),[[Re,e.overflow]]),be(Z("div",{class:ee("mx-context-menu-updown mx-context-no-clickable down"+(e.overflow&&e.scrollValue>-e.scrollHeight?"":" disabled")),onClick:t[2]||(t[2]=n=>e.onScroll(!0)),onWheel:t[3]||(t[3]=(...n)=>e.onMouseWhellMx&&e.onMouseWhellMx(...n))},[T(P)],34),[[Re,e.overflow]])],512)],38)}const xe=ye(Qt,[["render",on]]),ln={class:"mx-menu-ghost-host"},ot=oe({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:t,emit:l}){const c=e,v=l,r=ht(),g=I(),{options:u,show:p,container:P}=se(c);Be(()=>{p.value&&E()}),je(()=>{i()}),Qe(p,d=>{d?E():(Ge(b),i())});const b={closeMenu:O,isClosed:R,getMenuRef:()=>g.value,getMenuDimensions:()=>{var h;var d;return(h=(d=g.value)==null?void 0:d.getMenuDimensions())!=null?h:{width:0,height:0}}};let n=!1;function E(){x(),Ot(b)}function O(d){n=!0,v("close",d),u.value.menuTransitionProps||v("closeAnimFinished"),Ge(b)}function R(){return n}function x(){setTimeout(()=>{document.addEventListener("click",w,!0),document.addEventListener("contextmenu",w,!0),document.addEventListener("scroll",k,!0),!c.isFullScreenContainer&&P.value&&P.value.addEventListener("scroll",k,!0),u.value.keyboardControl!==!1&&document.addEventListener("keydown",j)},50)}function i(){document.removeEventListener("contextmenu",w,!0),document.removeEventListener("click",w,!0),document.removeEventListener("scroll",k,!0),!c.isFullScreenContainer&&P.value&&P.value.removeEventListener("scroll",k,!0),u.value.keyboardControl!==!1&&document.removeEventListener("keydown",j)}const s=I();q("globalSetCurrentSubMenu",d=>s.value=d);function j(d){var h,y,C,L,X,_,m,W,G,J,le,ae,M;let Q=!0;switch(d.key){case"Escape":{((h=s.value)==null?void 0:h.isTopLevel())===!1?(y=s.value)==null||y.closeCurrentSubMenu():O();break}case"ArrowDown":(C=s.value)==null||C.moveCurrentItemDown();break;case"ArrowUp":(L=s.value)==null||L.moveCurrentItemUp();break;case"Home":(X=s.value)==null||X.moveCurrentItemFirst();break;case"End":(_=s.value)==null||_.moveCurrentItemLast();break;case"ArrowLeft":{(m=s.value)!=null&&m.closeSelfAndActiveParent()||(G=(W=u.value).onKeyFocusMoveLeft)==null||G.call(W);break}case"ArrowRight":(J=s.value)!=null&&J.openCurrentItemSubMenu()||(ae=(le=u.value).onKeyFocusMoveRight)==null||ae.call(le);break;case"Enter":(M=s.value)==null||M.triggerCurrentItemClick(d);break;default:Q=!1;break}Q&&s.value&&(d.stopPropagation(),d.preventDefault())}function k(){u.value.closeWhenScroll!==!1&&O()}function w(d){A(d.target,d)}function A(d,h){for(var y,C;d;){if(d.classList&&d.classList.contains("mx-menu-host"))return;d=d.parentNode}u.value.clickCloseOnOutside!==!1?(i(),O()):(C=(y=u.value).onClickOnOutside)==null||C.call(y,h)}return q("globalOptions",u),q("globalCloseMenu",O),q("globalIsFullScreenContainer",c.isFullScreenContainer),q("globalHasSlot",d=>r[d]!==void 0),q("globalRenderSlot",(d,h)=>z(r,d,ue({},h),()=>[ne("span","Render slot failed")],!1)),q("menuContext",{zIndex:u.value.zIndex||V.defaultZindex,container:P.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>u.value.x,getParentAbsX:()=>u.value.y,getZoom:()=>u.value.zoom||V.defaultZoom,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[u.value.x,u.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),t(b),(d,h)=>(f(),$("div",ln,[o(u).menuTransitionProps?(f(),B(Je,We({key:0,appear:""},o(u).menuTransitionProps,{onAfterLeave:h[0]||(h[0]=y=>v("closeAnimFinished"))}),{default:U(()=>[o(p)?(f(),B(xe,{key:0,ref_key:"submenuInstance",ref:g,class:"mx-menu-host",items:o(u).items,adjustPosition:o(u).adjustPosition,maxWidth:o(u).maxWidth||o(V).defaultMaxWidth,minWidth:o(u).minWidth||o(V).defaultMinWidth,direction:o(u).direction||o(V).defaultDirection},{default:U(()=>[z(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):H("",!0)]),_:3},16)):o(p)?(f(),B(xe,{key:1,ref_key:"submenuInstance",ref:g,class:"mx-menu-host",items:o(u).items,adjustPosition:o(u).adjustPosition,maxWidth:o(u).maxWidth||o(V).defaultMaxWidth,minWidth:o(u).minWidth||o(V).defaultMinWidth,direction:o(u).direction||o(V).defaultDirection},{default:U(()=>[z(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):H("",!0)]))}}),an=oe({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(e,t){const{options:l,show:c}=se(e),v=I(null);return t.expose({closeMenu:()=>t.emit("update:show",!1),isClosed:()=>!c.value,getMenuRef:()=>{var r;return(r=v.value)==null?void 0:r.getMenuRef()},getMenuDimensions:()=>{var g;var r;return(g=(r=v.value)==null?void 0:r.getMenuDimensions())!=null?g:{width:0,height:0}}}),()=>{const{isNew:r,container:g,eleId:u}=tt(l.value);return[ne(ft,{to:`#${u}`},[ne(ot,{ref:v,options:l,show:c,container:g,isFullScreenContainer:!r,onClose:p=>{var P,b;t.emit("update:show",!1),t.emit("close"),(b=(P=l.value).onClose)==null||b.call(P,p)}},t.slots)])]}}}),un=oe({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,t){const l=D("globalOptions"),{adjustSubMenuPosition:c,maxWidth:v,minWidth:r}=se(e),g=typeof c.value<"u"?c.value:l.value.adjustPosition,u=I(),p=I();return t.expose({getSubMenuRef:()=>u.value,getMenuItemRef:()=>p.value}),()=>ne(He,me(ue({},e),{ref:p,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof t.slots.default!==void 0}),t.slots.default?{submenu:()=>ne(xe,{ref:u,maxWidth:v.value,minWidth:r.value,adjustPosition:g},{default:t.slots.default})}:void 0)}});function sn(e,t,l,c){const v=I(!0),r=ne(ot,{options:e,show:v,container:t,isFullScreenContainer:!l,onCloseAnimFinished:()=>{Ue(null,t)},onClose:g=>{var u;(u=e.onClose)==null||u.call(e,g),v.value=!1}},c);return Ue(r,t),r.component}function qe(e,t){const l=tt(e);return sn(e,l.container,l.isNew,t).exposed}const rn={install(e){e.config.globalProperties.$contextmenu=qe,e.component("ContextMenu",an),e.component("ContextMenuItem",He),e.component("ContextMenuGroup",un),e.component("ContextMenuSperator",_e),e.component("ContextMenuSeparator",_e),e.component("ContextSubMenu",xe)},showContextMenu(e,t){return qe(e,t)},isAnyContextMenuOpen(){return Pt()},closeContextMenu:et,transformMenuPosition:Rt},dn={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},cn={class:"flex items-center h-[34px]"},mn=oe({__name:"tree",emits:["tree-select"],setup(e,{emit:t}){const l=t,c=I(),v=I(""),r=I({}),g={children:"children",label:"name"},{isDark:u}=bt(),{treeLoading:p,treeData:P,openDictDialog:b,getDictTreeData:n}=kt(),E=(x,i)=>x?`${i.name}（${i.code}）`.includes(x):!0;function O(x){var s,j;const i=x.$treeNodeId;r.value[i]=(s=r.value[i])!=null&&s.highlight?Object.assign({id:i},r.value[i],{highlight:!1}):Object.assign({id:i},r.value[i],{highlight:!0}),Object.values(r.value).forEach(k=>{k.id!==i&&(k.highlight=!1)}),l("tree-select",(j=r.value[i])!=null&&j.highlight?Object.assign(me(ue({},x),{selected:!0})):Object.assign(me(ue({},x),{selected:!1})))}function R(x,{name:i,data:s}){x.preventDefault(),rn.showContextMenu({x:x.x,y:x.y,theme:u.value?"dark":"default",items:[{label:"修改",icon:ne(Ie(wt)),onClick:()=>{b("修改",s)}},{label:"删除",icon:ne(Ie(It)),onClick:()=>{yt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${i}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{n(),Ct("已成功删除",{type:"success"})})}}]})}return Qe(v,x=>{c.value.filter(x)}),(x,i)=>{const s=K("IconifyIconOffline"),j=K("el-icon"),k=K("el-input"),w=K("el-divider"),A=K("el-tree"),d=K("el-scrollbar"),h=K("el-button"),y=xt("loading");return be((f(),$("div",dn,[Z("div",cn,[T(k,{modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=C=>v.value=C),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:U(()=>[T(j,{class:"el-input__icon"},{default:U(()=>[be(T(s,{icon:"ri:search-line"},null,512),[[Re,v.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),T(w),T(d,{height:"calc(90vh - 150px)"},{default:U(()=>[T(A,{ref_key:"treeRef",ref:c,data:o(P),"node-key":"id",size:"small",props:g,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":E,onNodeClick:O},{default:U(({node:C,data:L})=>{var X,_,m;return[T(o(St),{class:ee(["!w-full","!p-1","!mt-2","!mr-2","rounded","select-none","hover:text-primary",v.value.trim().length>0&&`${C.label}（${L.code}）`.includes(v.value)&&"!text-red-500",(X=r.value[C.id])!=null&&X.highlight?"dark:!text-primary":""]),style:Oe({color:(_=r.value[C.id])!=null&&_.highlight?"var(--el-color-primary)":"",background:(m=r.value[C.id])!=null&&m.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:W=>R(W,{name:C.label,data:L})},{default:U(()=>[Ye(Pe(`${C.label}（${L.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),T(h,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:o(Ie)(o(Wt)),onClick:i[1]||(i[1]=C=>o(b)())},{default:U(()=>i[2]||(i[2]=[Ye(" 新增字典 ")])),_:1},8,["icon"])])),[[y,o(p)]])}}}),Wn=Mt(mn,[["__scopeId","data-v-0e614a4a"]]);export{Wn as default};
